!function(){"use strict";var t={586:function(t,e,s){s.r(e)},607:function(t,e,s){var i=this&&this.__awaiter||function(t,e,s,i){return new(s||(s=Promise))((function(r,a){function n(t){try{l(i.next(t))}catch(t){a(t)}}function o(t){try{l(i.throw(t))}catch(t){a(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof s?e:new s((function(t){t(e)}))).then(n,o)}l((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),s(586);const r={containerClass:"card-body",titleClass:"text-secondary",improveClass:"text-secondary",buttonClass:"btn btn-secondary",textareaContainer:"form-group",textareaClass:"form-control",titleUseful:"Была ли эта статья полезна?",titleThx:"Благодарим за отзыв.",titleSor:"Приносим извинения.",titleImprove:"Как можно улучшить эту статью?",titleNeedText:"Укажите текст замечания",btnUseful:"Да",btnNoUseful:"Нет",btnSend:"Отправить"};class a{constructor(t,e){this.element=t,this.props=Object.assign({},r,e),this.props.ajax.url||(this.props.ajax.url=t.getAttribute("data-url")),this.props.ajax.articleId||(this.props.ajax.articleId=t.getAttribute("data-id")),this.handleEvents(),this.render()}static create(t,e){return new a(t,e)}setRating(t){return i(this,void 0,void 0,(function*(){yield fetch(this.props.ajax.url,{method:"POST",body:JSON.stringify({id:this.props.ajax.articleId,rating:t})}),5===t?this.actionFinish():this.actionComment()}))}setComment(t){return i(this,void 0,void 0,(function*(){yield fetch(this.props.ajax.url,{method:"POST",body:JSON.stringify({id:this.props.ajax.articleId,text:t})}),this.actionFinish()}))}setTitle(t){this.element.querySelector(".as-title").innerHTML=t}actionFinish(){this.setTitle(this.props.titleThx),this.element.classList.add("submitted")}actionComment(){this.setTitle(this.props.titleSor),this.element.classList.add("rated")}handleEvents(){this.element.querySelector(".as-button").addEventListener("click",(t=>{this.setRating(Number(t.target.getAttribute("data-value")))})),this.element.querySelector(".as-submit-button").addEventListener("click",(t=>{const e=this.element.querySelector("textarea").value;""===e.trim()?alert(this.props.titleNeedText):this.setComment(e)}))}template(){return'<div class="as-title '+this.props.titleClass+'">'+this.props.titleUseful+'</div><div class="as-how-improve '+this.props.improveClass+'">'+this.props.titleImprove+'</div><div class="as-button-group"><button class="as-button '+this.props.buttonClass+'" data-value="5" type="button">'+this.props.btnUseful+'</button> <button class="as-button '+this.props.buttonClass+'" data-value="1" type="button">'+this.props.btnNoUseful+'</button></div><form><div class="'+this.props.textareaContainer+'"><textarea aria-label="'+this.props.titleImprove+'" class="'+this.props.textareaClass+'"></textarea></div><button class="as-submit-button '+this.props.buttonClass+'" type="button">'+this.props.btnSend+"</button></form>"}render(){this.element.innerHTML=this.template(),this.element.classList.add(this.props.containerClass)}}e.default=a}},e={};function s(i){var r=e[i];if(void 0!==r)return r.exports;var a=e[i]={exports:{}};return t[i].call(a.exports,a,a.exports,s),a.exports}s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};s(607)}();