!function(i){i.SAArticleSurvey={defaults:{url:null,articleId:null,buttonGroupClass:null,buttonClass:"btn btn-secondary",titleUseful:"Была ли эта статья полезна?",titleThx:"Благодарим за отзыв.",titleSor:"Приносим извинения.",titleImprove:"Как можно улучшить эту статью?",titleNeedText:"Укажите текст замечания",btnUseful:"Да",btnNoUseful:"Нет",btnSend:"Отправить"}},null==i.fn.SAArticleSurvey&&(i.fn.SAArticleSurvey=function(e){if("object"==typeof(e=e||{}))return this.each(function(){var t=i.extend(i.SAArticleSurvey.defaults,{},e);new s(this,t)}),this;throw new Error("Invalid arguments for SAArticleSurvey: "+e)});var s=function(t,e){this.$element=i(t),this.props=e,this.props.url||(this.props.url=this.$element.attr("data-url")),this.props.articleId||(this.props.articleId=this.$element.attr("data-id")),this._handleEvents(),this._render()};i.extend(s.prototype,{setRating:function(t){i.get(this.props.url,{id:this.props.articleId,rating:t}),5===t?this.actionFinish():this.actionComment()},setComment:function(t){i.get(this.props.url,{id:this.props.articleId,text:t}),this.actionFinish()},setTitle:function(t){this.$element.find(".title").html(t)},actionFinish:function(){this.setTitle(this.props.titleThx),this.$element.addClass("submitted")},actionComment:function(){this.setTitle(this.props.titleSor),this.$element.addClass("rated")},_handleEvents:function(){var e=this;this.$element.on("click",".as-button",function(){e.setRating(Number(i(this).attr("data-value")))}),this.$element.on("click",".submit-button",function(){var t=i(this.form).find("textarea").val();""===t.trim()?alert(e.props.titleNeedText):e.setComment(t)})},_render:function(){this.$element.html(this.template())}}),s.prototype.template=function(){return'<div class="title">'+this.props.titleUseful+'</div><div class="how-improve">'+this.props.titleImprove+'</div><div class="'+this.props.buttonGroupClass+'"><button class="as-button '+this.props.buttonClass+'" data-value="5" type="button">'+this.props.btnUseful+'</button> <button class="as-button  '+this.props.buttonClass+'" data-value="1" type="button">'+this.props.btnNoUseful+'</button></div><form><div class="form-group"><div class="col-xs-5"><textarea aria-label="'+this.props.titleImprove+'" class="form-control"></textarea></div></div><button class="submit-button '+this.props.buttonClass+'" type="button">'+this.props.btnSend+"</button></form>"},s.version="1.1.0"}(jQuery),function(t){t.extend(t.SAArticleSurvey.defaults,{titleUseful:"Была ли эта статья полезна?",titleThx:"Благодарим за отзыв.",titleSor:"Приносим извинения.",titleImprove:"Как можно улучшить эту статью?",titleNeedText:"Укажите текст замечания",btnUseful:"Да",btnNoUseful:"Нет",btnSend:"Отправить"})}(jQuery),function(t){t.extend(t.SAArticleSurvey.defaults,{titleUseful:"Была ли эта статья полезна?",titleThx:"Благодарим за отзыв.",titleSor:"Приносим извинения.",titleImprove:"Как можно улучшить эту статью?",titleNeedText:"Укажите текст замечания",btnUseful:"Да",btnNoUseful:"Нет",btnSend:"Отправить"})}(jQuery);