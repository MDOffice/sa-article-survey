!function(s){s.SAArticleSurvey={defaults:{url:null,articleId:null,titleClass:"text-secondary",improveClass:"text-secondary",buttonClass:"btn btn-secondary",textareaContainer:"form-group",textareaClass:"form-control",titleUseful:"Была ли эта статья полезна?",titleThx:"Благодарим за отзыв.",titleSor:"Приносим извинения.",titleImprove:"Как можно улучшить эту статью?",titleNeedText:"Укажите текст замечания",btnUseful:"Да",btnNoUseful:"Нет",btnSend:"Отправить"}},null==s.fn.SAArticleSurvey&&(s.fn.SAArticleSurvey=function(e){if("object"==typeof(e=e||{}))return this.each(function(){var t=s.extend(s.SAArticleSurvey.defaults,{},e);new i(this,t)}),this;throw new Error("Invalid arguments for SAArticleSurvey: "+e)});var i=function(t,e){this.$element=s(t),this.props=e,this.props.url||(this.props.url=this.$element.attr("data-url")),this.props.articleId||(this.props.articleId=this.$element.attr("data-id")),this._handleEvents(),this._render()};s.extend(i.prototype,{setRating:function(t){s.get(this.props.url,{id:this.props.articleId,rating:t}),5===t?this.actionFinish():this.actionComment()},setComment:function(t){s.get(this.props.url,{id:this.props.articleId,text:t}),this.actionFinish()},setTitle:function(t){this.$element.find(".as-title").html(t)},actionFinish:function(){this.setTitle(this.props.titleThx),this.$element.addClass("submitted")},actionComment:function(){this.setTitle(this.props.titleSor),this.$element.addClass("rated")},_handleEvents:function(){var e=this;this.$element.on("click",".as-button",function(){e.setRating(Number(s(this).attr("data-value")))}),this.$element.on("click",".as-submit-button",function(){var t=s(this.form).find("textarea").val();""===t.trim()?alert(e.props.titleNeedText):e.setComment(t)})},_render:function(){this.$element.html(this.template())}}),i.prototype.template=function(){return'<div class="as-title '+this.props.titleClass+'">'+this.props.titleUseful+'</div><div class="as-how-improve '+this.props.improveClass+'">'+this.props.titleImprove+'</div><div class="as-button-group"><button class="as-button '+this.props.buttonClass+'" data-value="5" type="button">'+this.props.btnUseful+'</button> <button class="as-button '+this.props.buttonClass+'" data-value="1" type="button">'+this.props.btnNoUseful+'</button></div><form><div class="'+this.props.textareaContainer+'"><textarea aria-label="'+this.props.titleImprove+'" class="'+this.props.textareaClass+'"></textarea></div><button class="as-submit-button '+this.props.buttonClass+'" type="button">'+this.props.btnSend+"</button></form>"},i.version="1.2.0"}(jQuery),function(t){t.extend(t.SAArticleSurvey.defaults,{titleUseful:"Была ли эта статья полезна?",titleThx:"Благодарим за отзыв.",titleSor:"Приносим извинения.",titleImprove:"Как можно улучшить эту статью?",titleNeedText:"Укажите текст замечания",btnUseful:"Да",btnNoUseful:"Нет",btnSend:"Отправить"})}(jQuery),function(t){t.extend(t.SAArticleSurvey.defaults,{titleUseful:"Была ли эта статья полезна?",titleThx:"Благодарим за отзыв.",titleSor:"Приносим извинения.",titleImprove:"Как можно улучшить эту статью?",titleNeedText:"Укажите текст замечания",btnUseful:"Да",btnNoUseful:"Нет",btnSend:"Отправить"})}(jQuery);